<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - TARKA</title>
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">


</head>
<body>
  <!-- üî• Fire Background Video -->
<video autoplay muted loop playsinline class="fire-bg">
  <source src="firebg.mp4.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
 <div class="fire-overlay"></div>

    <!-- Animated Background -->
   <div class="bg-animation">
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
    </div>

    <!-- Navigation Section -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <a href="home.html" class="logo">
                    <img src="logo (2).png" alt="Tarka Logo" class="logo-img"> TARKA</a>
                <ul class="nav-links">
                    <li><a href="home.html">Home</a></li>
                    <li><a href="menu.html">Menu</a></li>
                    <li><a href="cart.html">Cart (<span id="cart-count">0</span>)</a></li>
                    <li><a href="tracking.html">Track Order</a></li>
                    <li><a href="login.html" class="btn btn-primary">Login</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Login Form Section -->
    <div class="login-container">
        <div class="container" style="display: flex; justify-content: center; align-items: center; gap: 30px;">

          <!-- Left Images (horizontal row) -->
<div class="side-row">
    <img src="https://i.pinimg.com/736x/a6/e5/25/a6e525e2e1040bbd4fdc646357ea9123.jpg"
         alt="Food Left 1" class="side-img left" style="animation-delay: 0s;">
    <img src="https://i.pinimg.com/originals/2b/a9/36/2ba9369dac767d79411fb3a544fd8563.png"
         alt="Food Left 2" class="side-img left" style="animation-delay: 2s;">
    <img src="https://i.pinimg.com/736x/e9/f8/3b/e9f83b3e44651f65f0e5a1a1259233c5.jpg"
         alt="Food Left 3" class="side-img left" style="animation-delay: 4s;"> 
</div>
 <div class="glass-card" style="padding: 3rem 4rem; border-radius: 25px; max-width: 1200px; width: 95%; margin: 7rem auto; position: relative; overflow: hidden;">
<form class="login-form" id="auth-form" onsubmit="handleFormSubmit(event)">
  <div class="toggle-btns">
      <button type="button" id="signInBtn" class="active">Sign In</button>
      <button type="button" id="signUpBtn">Sign Up</button>
  </div>

  <h2 id="form-title" style="text-align: center; margin-bottom: 1.5rem; color: var(--primary-orange);">
      Welcome Back
  </h2>

  <!-- Email -->
  <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" placeholder="Enter your email" required>
      <small id="email-error" style="color: red; display: none;">Enter a valid email address</small>
  </div>

  <!-- Password -->
<div class="form-group">
    <label for="password">Password</label>
    <input type="password" id="password" placeholder="Enter a password" required>
    <i class="fa-solid fa-eye password-toggle" id="togglePassword"></i>
    <small id="password-error" style="color: red; display: none;"></small>
    <div id="password-strength" style="margin-top: 5px; font-size: 14px;"></div>
</div>

<!-- Confirm Password (Signup only) -->
<div class="form-group" id="confirm-password-group" style="display: none;">
    <label for="confirmPassword">Confirm Password</label>
    <input type="password" id="confirmPassword" placeholder="Confirm password">
    <i class="fa-solid fa-eye password-toggle" id="toggleConfirmPassword"></i>
    <small id="confirm-error" style="color: red; display: none;">Passwords do not match</small>
</div>

  <button type="submit" id="form-button" class="btn btn-primary" 
          style="width: 100%; margin-bottom: 1rem;">Sign In</button>

  <p id="form-success" class="success-message" 
     style="color: green; text-align: center; display: none;">Success!</p>
</form>
</div>


           <!-- Right Images (horizontal row) -->
<div class="side-row">
    <img src="https://i.pinimg.com/736x/f3/be/97/f3be97afa246acf68b3fe1ea0809bc93.jpg"
         alt="Food Right 1" class="side-img right" style="animation-delay: 1s;">
    <img src="https://i.pinimg.com/736x/09/fd/c3/09fdc36a5b12c69340180b18b22e7f68.jpg"
         alt="Food Right 2" class="side-img right" style="animation-delay: 3s;">
    <img src="https://i.pinimg.com/originals/38/93/16/3893163c962fb606b38756e3412d76a2.jpg"
         alt="Food Right 3" class="side-img right" style="animation-delay: 5s;"> 
</div>
        </div>
    </div>
     

    <!-- Footer Section -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>TARKA</h3>
                    <p>Delivering happiness, one meal at a time. Experience the finest cuisine with our premium food delivery service.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <p><a href="menu.html" style="color: var(--text-light); text-decoration: none;">Menu</a></p>
                    <p><a href="tracking.html" style="color: var(--text-light); text-decoration: none;">Track Order</a></p>
                    <p><a href="home.html" style="color: var(--text-light); text-decoration: none;">About Us</a></p>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p>üìû +92 345-123-4567</p>
                    <p>üìß hello@tarka.com</p>
                    <p>üìç 123 Food Street, City</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 TARKA. All rights reserved.</p>
            </div>
        </div>
    </footer>
  
<script>
(() => {
  const signInBtn = document.getElementById("signInBtn");
  const signUpBtn = document.getElementById("signUpBtn");
  const formTitle = document.getElementById("form-title");
  const confirmGroup = document.getElementById("confirm-password-group");
  const formButton = document.getElementById("form-button");
  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const confirmPasswordInput = document.getElementById("confirmPassword");
  const togglePassword = document.getElementById("togglePassword");
  const toggleConfirmPassword = document.getElementById("toggleConfirmPassword");
  const passwordError = document.getElementById("password-error");
  const confirmError = document.getElementById("confirm-error");
  const successMsg = document.getElementById("form-success");
  const passwordStrength = document.getElementById("password-strength");

  let isSignIn = true;

  // === Toggle Eye Icons ===
 // === Toggle Eye Icons ===
togglePassword.addEventListener("click", () => {
  const type = passwordInput.type === "password" ? "text" : "password";
  passwordInput.type = type;
  togglePassword.classList.toggle("fa-eye");
  togglePassword.classList.toggle("fa-eye-slash");
});

toggleConfirmPassword.addEventListener("click", () => {
  const type = confirmPasswordInput.type === "password" ? "text" : "password";
  confirmPasswordInput.type = type;
  toggleConfirmPassword.classList.toggle("fa-eye");
  toggleConfirmPassword.classList.toggle("fa-eye-slash");
});

  // === Switch Between Sign In / Sign Up ===
  signInBtn.addEventListener("click", () => toggleForm(true));
  signUpBtn.addEventListener("click", () => toggleForm(false));

  function toggleForm(signIn) {
    isSignIn = signIn;
    confirmGroup.style.display = signIn ? "none" : "block";
    formTitle.textContent = signIn ? "Welcome Back" : "Create Account";
    formButton.textContent = signIn ? "Sign In" : "Sign Up";

    signInBtn.classList.toggle("active", signIn);
    signUpBtn.classList.toggle("active", !signIn);
    successMsg.style.display = "none";
    passwordError.style.display = "none";
    confirmError.style.display = "none";
    passwordInput.value = "";
    confirmPasswordInput.value = "";
  }

  // === Validation Functions ===
  function validateEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }

  function validatePassword(pwd) {
    const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
    return regex.test(pwd);
  }

  // === Live Password Strength Feedback ===
  passwordInput.addEventListener("input", () => {
    const value = passwordInput.value;
    let strength = 0;
    if (/[a-z]/.test(value)) strength++;
    if (/[A-Z]/.test(value)) strength++;
    if (/\d/.test(value)) strength++;
    if (/[@$!%*?&]/.test(value)) strength++;
    if (value.length >= 8) strength++;

    const levels = ["Weak", "Fair", "Good", "Strong", "Very Strong"];
    const colors = ["red", "orange", "goldenrod", "green", "darkgreen"];
    passwordStrength.textContent = value ? `Strength: ${levels[strength - 1] || "Weak"}` : "";
    passwordStrength.style.color = colors[strength - 1] || "red";
  });

  // === Handle Form Submission ===
  document.getElementById("auth-form").addEventListener("submit", (e) => {
    e.preventDefault();
    const email = emailInput.value.trim();
    const pwd = passwordInput.value.trim();
    const confirm = confirmPasswordInput.value.trim();
    passwordError.style.display = "none";
    confirmError.style.display = "none";
    successMsg.style.display = "none";

    if (!validateEmail(email)) {
      passwordError.textContent = "Invalid email format";
      passwordError.style.display = "block";
      return;
    }

    if (!validatePassword(pwd)) {
      passwordError.textContent =
        "Password must be 8+ chars, include uppercase, lowercase, number, and special character.";
      passwordError.style.display = "block";
      return;
    }

    if (!isSignIn && pwd !== confirm) {
      confirmError.style.display = "block";
      return;
    }

    successMsg.textContent = isSignIn
      ? "Login successful! Redirecting..."
      : "Account created successfully!";
    successMsg.style.display = "block";

    setTimeout(() => (window.location.href = "home.html"), 1500);
  });
  // ===== LOGIN RESTRICTION SYSTEM =====
// Store login status in localStorage
const setLoggedIn = (status) => {
    localStorage.setItem('isLoggedIn', status);
};

const isLoggedIn = () => {
    return localStorage.getItem('isLoggedIn') === 'true';
};

// Update the form submission to set login status
document.getElementById("auth-form").addEventListener("submit", (e) => {
    e.preventDefault();
    const email = emailInput.value.trim();
    const pwd = passwordInput.value.trim();
    const confirm = confirmPasswordInput.value.trim();
    passwordError.style.display = "none";
    confirmError.style.display = "none";
    successMsg.style.display = "none";

    if (!validateEmail(email)) {
        passwordError.textContent = "Invalid email format";
        passwordError.style.display = "block";
        return;
    }

    if (!validatePassword(pwd)) {
        passwordError.textContent =
            "Password must be 8+ chars, include uppercase, lowercase, number, and special character.";
        passwordError.style.display = "block";
        return;
    }

    if (!isSignIn && pwd !== confirm) {
        confirmError.style.display = "block";
        return;
    }

    // Set user as logged in
    setLoggedIn(true);
    
    successMsg.textContent = isSignIn
        ? "Login successful! Redirecting..."
        : "Account created successfully!";
    successMsg.style.display = "block";

    setTimeout(() => (window.location.href = "home.html"), 1500);
});

// Check if user is logged in when page loads
window.addEventListener('DOMContentLoaded', () => {
    // If user is already logged in, redirect to home
    if (isLoggedIn() && window.location.pathname.includes('login.html')) {
        window.location.href = 'home.html';
    }
});
})();
</script>


</body>
</html>
